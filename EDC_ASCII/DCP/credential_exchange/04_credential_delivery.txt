4. Credential Delivery (Entrega de Credencial - Modelo Push)

   ISSUER (CLIENT)                                  HOLDER (SERVER)
   +-----------------------+                        +-----------------------+
   | Issuer Service        |                        | Identity Hub          |
   |                       |  (1) Resolve Endpoint  |                       |
   | [Delivery Service]    | ---------------------> | [DID Document]        |
   | (Extracts Holder DID) |   (Lookup Service)     | (Finds 'Credential    |
   |                       |                        |  Service' URL)        |
   |                       |                        |                       |
   |                       |  (2) Push Credential   | [Storage API]         |
   |                       | ---------------------> | (Validates Issuer)    |
   |                       |   POST /credentials    | (Persists VC)         |
   |                       |   (Signed VC JWT)      |                       |
   |                       |                        |                       |
   |                       |  (3) Acknowledge       |                       |
   |                       | <--------------------- |                       |
   |                       |   HTTP 200 OK          |                       |
   +-----------------------+                        +-----------------------+

Descripción Técnica:

Once the credential is generated and signed, the Issuer actively delivers it to the Holder's storage endpoint.

(1) Resolve Endpoint: The Issuer resolves the Holder's DID Document to locate the CredentialService entry. This entry contains the URL of the Holder's storage API.

(2) Push Credential: The Issuer uses the CredentialStorageClient to send the signed Verifiable Credential (VC) to the resolved URL via an HTTP POST request.

(3) Acknowledge: The Holder's StorageApi receives the credential, verifies the Issuer's signature, stores it in the CredentialStore, and returns a 200 OK to confirm receipt.